{
  "$id": "https://github.com/cefn/lowban/schema/db.schema.js",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "definitions": {
    "categoryTagIdPattern": {
      "$comment": "A category tag starts with an alphabetical character",
      "type": "string",
      "pattern": "^[a-zA-Z\\d\\s:\\u00C0-\\u00FF].*$"
    },
    "priorityTagIdPattern": {
      "$comment": "A priority tag starts with a bang !",
      "type": "string",
      "pattern": "^!.*$"
    },
    "contextTagIdPattern": {
      "$comment": "A context tag starts with @",
      "type": "string",
      "pattern": "^@.*$"
    },
    "statusTagIdPattern": {
      "$comment": "A status tag starts with #",
      "type": "string",
      "pattern": "^#.*$"
    }
  },
  "properties": {
    "task": {
      "type": "array",
      "items": {
        "$ref": "./task.schema.json#/definitions/task"
      }
    },
    "category": {
      "type": "array",
      "items": {
        "allOf": [
          { "$ref": "./tag.schema.json#/definitions/tag" },
          {
            "properties": {
              "id": {
                "$ref": "#/definitions/categoryTagIdPattern"
              }
            }
          }
        ]
      }
    },
    "priority": {
      "type": "array",
      "items": {
        "allOf": [
          { "$ref": "./tag.schema.json#/definitions/tag" },
          {
            "properties": {
              "id": {
                "$ref": "#/definitions/priorityTagIdPattern"
              }
            }
          }
        ]
      }
    },
    "context": {
      "type": "array",
      "items": {
        "allOf": [
          { "$ref": "./tag.schema.json#/definitions/tag" },
          {
            "properties": {
              "id": {
                "$ref": "#/definitions/contextTagIdPattern"
              }
            }
          }
        ]
      }
    },
    "status": {
      "type": "array",
      "items": {
        "allOf": [
          { "$ref": "./tag.schema.json#/definitions/tag" },
          {
            "properties": {
              "id": {
                "$ref": "#/definitions/statusTagIdPattern"
              }
            }
          }
        ]
      }
    }
  }
}
